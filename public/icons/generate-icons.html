<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PWA Icon Generator - Reflets de Bonheur</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #D4AF37;
      text-align: center;
    }
    .instructions {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .generator {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    button {
      background: #D4AF37;
      color: #2C2C2C;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: 600;
      border-radius: 6px;
      cursor: pointer;
      margin: 10px 5px;
    }
    button:hover {
      background: #c19d2f;
    }
    .preview {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 30px;
    }
    .preview-item {
      text-align: center;
    }
    .preview-item canvas {
      border: 1px solid #ddd;
      border-radius: 8px;
      display: block;
      margin-bottom: 8px;
    }
    .preview-item p {
      font-size: 12px;
      color: #666;
      margin: 0;
    }
    .status {
      margin-top: 20px;
      padding: 15px;
      background: #e8f5e9;
      border-radius: 6px;
      color: #2e7d32;
    }
  </style>
</head>
<body>
  <h1>üì∏ Reflets de Bonheur - Icon Generator</h1>

  <div class="instructions">
    <h2>Instructions</h2>
    <ol>
      <li>Click "Generate All Icons" below</li>
      <li>Right-click each generated icon and "Save Image As..."</li>
      <li>Save with the exact filename shown (e.g., icon-192x192.png)</li>
      <li>Save all icons to the <code>/public/icons/</code> folder</li>
    </ol>
    <p><strong>Note:</strong> This generates icons with a camera symbol and champagne gold background.</p>
  </div>

  <div class="generator">
    <button onclick="generateAllIcons()">üé® Generate All Icons</button>
    <button onclick="downloadAllIcons()">‚¨áÔ∏è Download All (as ZIP)</button>

    <div id="status"></div>
    <div id="preview" class="preview"></div>
  </div>

  <script>
    const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
    const maskableSizes = [192, 512];
    const champagneGold = '#D4AF37';
    const deepCharcoal = '#2C2C2C';
    const ivory = '#FFFFF0';

    function drawIcon(canvas, size, maskable = false) {
      const ctx = canvas.getContext('2d');
      canvas.width = size;
      canvas.height = size;

      // Background
      ctx.fillStyle = champagneGold;
      ctx.fillRect(0, 0, size, size);

      // Camera icon
      const padding = maskable ? size * 0.25 : size * 0.15;
      const iconSize = size - (padding * 2);
      const centerX = size / 2;
      const centerY = size / 2;

      ctx.strokeStyle = ivory;
      ctx.fillStyle = ivory;
      ctx.lineWidth = size * 0.08;
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';

      // Camera body
      const bodyWidth = iconSize * 0.8;
      const bodyHeight = iconSize * 0.6;
      const bodyX = centerX - bodyWidth / 2;
      const bodyY = centerY - bodyHeight / 2 + iconSize * 0.1;
      const radius = size * 0.08;

      ctx.beginPath();
      ctx.moveTo(bodyX + radius, bodyY);
      ctx.lineTo(bodyX + bodyWidth - radius, bodyY);
      ctx.quadraticCurveTo(bodyX + bodyWidth, bodyY, bodyX + bodyWidth, bodyY + radius);
      ctx.lineTo(bodyX + bodyWidth, bodyY + bodyHeight - radius);
      ctx.quadraticCurveTo(bodyX + bodyWidth, bodyY + bodyHeight, bodyX + bodyWidth - radius, bodyY + bodyHeight);
      ctx.lineTo(bodyX + radius, bodyY + bodyHeight);
      ctx.quadraticCurveTo(bodyX, bodyY + bodyHeight, bodyX, bodyY + bodyHeight - radius);
      ctx.lineTo(bodyX, bodyY + radius);
      ctx.quadraticCurveTo(bodyX, bodyY, bodyX + radius, bodyY);
      ctx.closePath();
      ctx.fill();

      // Lens
      const lensRadius = iconSize * 0.2;
      ctx.beginPath();
      ctx.arc(centerX, centerY + iconSize * 0.1, lensRadius, 0, Math.PI * 2);
      ctx.fillStyle = champagneGold;
      ctx.fill();
      ctx.strokeStyle = ivory;
      ctx.lineWidth = size * 0.04;
      ctx.stroke();

      // Inner lens circle
      ctx.beginPath();
      ctx.arc(centerX, centerY + iconSize * 0.1, lensRadius * 0.5, 0, Math.PI * 2);
      ctx.strokeStyle = ivory;
      ctx.lineWidth = size * 0.03;
      ctx.stroke();

      // Viewfinder bump
      const bumpWidth = bodyWidth * 0.3;
      const bumpHeight = iconSize * 0.15;
      const bumpX = centerX - bumpWidth / 2;
      const bumpY = bodyY - bumpHeight;

      ctx.fillStyle = ivory;
      ctx.fillRect(bumpX, bumpY, bumpWidth, bumpHeight);

      // Flash indicator
      ctx.beginPath();
      ctx.arc(bodyX + bodyWidth - iconSize * 0.15, bodyY + iconSize * 0.15, size * 0.04, 0, Math.PI * 2);
      ctx.fillStyle = ivory;
      ctx.fill();
    }

    function generateAllIcons() {
      const preview = document.getElementById('preview');
      const status = document.getElementById('status');
      preview.innerHTML = '';

      let generated = 0;
      const total = sizes.length + maskableSizes.length;

      // Regular icons
      sizes.forEach(size => {
        const container = document.createElement('div');
        container.className = 'preview-item';

        const canvas = document.createElement('canvas');
        canvas.id = `icon-${size}`;
        drawIcon(canvas, size, false);

        const label = document.createElement('p');
        label.textContent = `icon-${size}x${size}.png`;

        container.appendChild(canvas);
        container.appendChild(label);
        preview.appendChild(container);

        generated++;
      });

      // Maskable icons
      maskableSizes.forEach(size => {
        const container = document.createElement('div');
        container.className = 'preview-item';

        const canvas = document.createElement('canvas');
        canvas.id = `icon-maskable-${size}`;
        drawIcon(canvas, size, true);

        const label = document.createElement('p');
        label.textContent = `icon-maskable-${size}x${size}.png`;

        container.appendChild(canvas);
        container.appendChild(label);
        preview.appendChild(container);

        generated++;
      });

      status.innerHTML = `‚úÖ Generated ${generated}/${total} icons! Right-click each to save.`;
    }

    async function downloadAllIcons() {
      // Note: This requires JSZip library for actual ZIP creation
      // For now, we'll just trigger individual downloads
      alert('Right-click each icon above and select "Save Image As..." to download.\n\nOr use the browser console to download all at once.');

      // Log download commands for console use
      console.log('// Copy and run this in console to download all:');

      sizes.forEach(size => {
        const canvas = document.getElementById(`icon-${size}`);
        if (canvas) {
          console.log(`// Download ${size}x${size}`);
          console.log(`document.getElementById('icon-${size}').toBlob(blob => {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'icon-${size}x${size}.png';
            a.click();
            URL.revokeObjectURL(url);
          });`);
        }
      });

      maskableSizes.forEach(size => {
        const canvas = document.getElementById(`icon-maskable-${size}`);
        if (canvas) {
          console.log(`// Download maskable ${size}x${size}`);
          console.log(`document.getElementById('icon-maskable-${size}').toBlob(blob => {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'icon-maskable-${size}x${size}.png';
            a.click();
            URL.revokeObjectURL(url);
          });`);
        }
      });
    }

    // Auto-generate on load
    window.addEventListener('load', () => {
      setTimeout(generateAllIcons, 500);
    });
  </script>
</body>
</html>
